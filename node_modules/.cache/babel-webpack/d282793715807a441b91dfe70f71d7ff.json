{"ast":null,"code":"'use strict';\n\nvar _asyncToGenerator = require(\"/Users/sydneybailey/Internship/contract-testing/node_modules/@babel/runtime/helpers/asyncToGenerator\").default;\n\nclass TimeoutError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = 'TimeoutError';\n  }\n\n}\n\nconst pTimeout = (promise, milliseconds, fallback, options) => {\n  let timer;\n  const cancelablePromise = new Promise((resolve, reject) => {\n    if (typeof milliseconds !== 'number' || milliseconds < 0) {\n      throw new TypeError('Expected `milliseconds` to be a positive number');\n    }\n\n    if (milliseconds === Infinity) {\n      resolve(promise);\n      return;\n    }\n\n    options = {\n      customTimers: {\n        setTimeout,\n        clearTimeout\n      },\n      ...options\n    };\n    timer = options.customTimers.setTimeout.call(undefined, () => {\n      if (typeof fallback === 'function') {\n        try {\n          resolve(fallback());\n        } catch (error) {\n          reject(error);\n        }\n\n        return;\n      }\n\n      const message = typeof fallback === 'string' ? fallback : `Promise timed out after ${milliseconds} milliseconds`;\n      const timeoutError = fallback instanceof Error ? fallback : new TimeoutError(message);\n\n      if (typeof promise.cancel === 'function') {\n        promise.cancel();\n      }\n\n      reject(timeoutError);\n    }, milliseconds);\n\n    _asyncToGenerator(function* () {\n      try {\n        resolve(yield promise);\n      } catch (error) {\n        reject(error);\n      } finally {\n        options.customTimers.clearTimeout.call(undefined, timer);\n      }\n    })();\n  });\n\n  cancelablePromise.clear = () => {\n    clearTimeout(timer);\n    timer = undefined;\n  };\n\n  return cancelablePromise;\n};\n\nmodule.exports = pTimeout; // TODO: Remove this for the next major release\n\nmodule.exports.default = pTimeout;\nmodule.exports.TimeoutError = TimeoutError;","map":{"version":3,"sources":["/Users/sydneybailey/Internship/contract-testing/node_modules/libp2p-websockets/node_modules/p-timeout/index.js"],"names":["TimeoutError","Error","constructor","message","name","pTimeout","promise","milliseconds","fallback","options","timer","cancelablePromise","Promise","resolve","reject","TypeError","Infinity","customTimers","setTimeout","clearTimeout","call","undefined","error","timeoutError","cancel","clear","module","exports","default"],"mappings":"AAAA;;;;AAEA,MAAMA,YAAN,SAA2BC,KAA3B,CAAiC;AAChCC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACpB,UAAMA,OAAN;AACA,SAAKC,IAAL,GAAY,cAAZ;AACA;;AAJ+B;;AAOjC,MAAMC,QAAQ,GAAG,CAACC,OAAD,EAAUC,YAAV,EAAwBC,QAAxB,EAAkCC,OAAlC,KAA8C;AAC9D,MAAIC,KAAJ;AACA,QAAMC,iBAAiB,GAAG,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAC1D,QAAI,OAAOP,YAAP,KAAwB,QAAxB,IAAoCA,YAAY,GAAG,CAAvD,EAA0D;AACzD,YAAM,IAAIQ,SAAJ,CAAc,iDAAd,CAAN;AACA;;AAED,QAAIR,YAAY,KAAKS,QAArB,EAA+B;AAC9BH,MAAAA,OAAO,CAACP,OAAD,CAAP;AACA;AACA;;AAEDG,IAAAA,OAAO,GAAG;AACTQ,MAAAA,YAAY,EAAE;AAACC,QAAAA,UAAD;AAAaC,QAAAA;AAAb,OADL;AAET,SAAGV;AAFM,KAAV;AAKAC,IAAAA,KAAK,GAAGD,OAAO,CAACQ,YAAR,CAAqBC,UAArB,CAAgCE,IAAhC,CAAqCC,SAArC,EAAgD,MAAM;AAC7D,UAAI,OAAOb,QAAP,KAAoB,UAAxB,EAAoC;AACnC,YAAI;AACHK,UAAAA,OAAO,CAACL,QAAQ,EAAT,CAAP;AACA,SAFD,CAEE,OAAOc,KAAP,EAAc;AACfR,UAAAA,MAAM,CAACQ,KAAD,CAAN;AACA;;AAED;AACA;;AAED,YAAMnB,OAAO,GAAG,OAAOK,QAAP,KAAoB,QAApB,GAA+BA,QAA/B,GAA2C,2BAA0BD,YAAa,eAAlG;AACA,YAAMgB,YAAY,GAAGf,QAAQ,YAAYP,KAApB,GAA4BO,QAA5B,GAAuC,IAAIR,YAAJ,CAAiBG,OAAjB,CAA5D;;AAEA,UAAI,OAAOG,OAAO,CAACkB,MAAf,KAA0B,UAA9B,EAA0C;AACzClB,QAAAA,OAAO,CAACkB,MAAR;AACA;;AAEDV,MAAAA,MAAM,CAACS,YAAD,CAAN;AACA,KAnBO,EAmBLhB,YAnBK,CAAR;;AAqBA,sBAAC,aAAY;AACZ,UAAI;AACHM,QAAAA,OAAO,OAAOP,OAAP,CAAP;AACA,OAFD,CAEE,OAAOgB,KAAP,EAAc;AACfR,QAAAA,MAAM,CAACQ,KAAD,CAAN;AACA,OAJD,SAIU;AACTb,QAAAA,OAAO,CAACQ,YAAR,CAAqBE,YAArB,CAAkCC,IAAlC,CAAuCC,SAAvC,EAAkDX,KAAlD;AACA;AACD,KARD;AASA,GA7CyB,CAA1B;;AA+CAC,EAAAA,iBAAiB,CAACc,KAAlB,GAA0B,MAAM;AAC/BN,IAAAA,YAAY,CAACT,KAAD,CAAZ;AACAA,IAAAA,KAAK,GAAGW,SAAR;AACA,GAHD;;AAKA,SAAOV,iBAAP;AACA,CAvDD;;AAyDAe,MAAM,CAACC,OAAP,GAAiBtB,QAAjB,C,CACA;;AACAqB,MAAM,CAACC,OAAP,CAAeC,OAAf,GAAyBvB,QAAzB;AAEAqB,MAAM,CAACC,OAAP,CAAe3B,YAAf,GAA8BA,YAA9B","sourcesContent":["'use strict';\n\nclass TimeoutError extends Error {\n\tconstructor(message) {\n\t\tsuper(message);\n\t\tthis.name = 'TimeoutError';\n\t}\n}\n\nconst pTimeout = (promise, milliseconds, fallback, options) => {\n\tlet timer;\n\tconst cancelablePromise = new Promise((resolve, reject) => {\n\t\tif (typeof milliseconds !== 'number' || milliseconds < 0) {\n\t\t\tthrow new TypeError('Expected `milliseconds` to be a positive number');\n\t\t}\n\n\t\tif (milliseconds === Infinity) {\n\t\t\tresolve(promise);\n\t\t\treturn;\n\t\t}\n\n\t\toptions = {\n\t\t\tcustomTimers: {setTimeout, clearTimeout},\n\t\t\t...options\n\t\t};\n\n\t\ttimer = options.customTimers.setTimeout.call(undefined, () => {\n\t\t\tif (typeof fallback === 'function') {\n\t\t\t\ttry {\n\t\t\t\t\tresolve(fallback());\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst message = typeof fallback === 'string' ? fallback : `Promise timed out after ${milliseconds} milliseconds`;\n\t\t\tconst timeoutError = fallback instanceof Error ? fallback : new TimeoutError(message);\n\n\t\t\tif (typeof promise.cancel === 'function') {\n\t\t\t\tpromise.cancel();\n\t\t\t}\n\n\t\t\treject(timeoutError);\n\t\t}, milliseconds);\n\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tresolve(await promise);\n\t\t\t} catch (error) {\n\t\t\t\treject(error);\n\t\t\t} finally {\n\t\t\t\toptions.customTimers.clearTimeout.call(undefined, timer);\n\t\t\t}\n\t\t})();\n\t});\n\n\tcancelablePromise.clear = () => {\n\t\tclearTimeout(timer);\n\t\ttimer = undefined;\n\t};\n\n\treturn cancelablePromise;\n};\n\nmodule.exports = pTimeout;\n// TODO: Remove this for the next major release\nmodule.exports.default = pTimeout;\n\nmodule.exports.TimeoutError = TimeoutError;\n"]},"metadata":{},"sourceType":"script"}