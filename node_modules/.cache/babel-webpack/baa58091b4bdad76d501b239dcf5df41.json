{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"/Users/sydneybailey/Internship/contract-testing/node_modules/@babel/runtime/helpers/asyncToGenerator\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TimeoutProperty = void 0;\n\nconst timeoutAfter = timeMs => {\n  let timeoutHandle = null;\n  const promise = new Promise(resolve => {\n    timeoutHandle = setTimeout(() => {\n      resolve(`Property timeout: exceeded limit of ${timeMs} milliseconds`);\n    }, timeMs);\n  });\n  return {\n    clear: () => clearTimeout(timeoutHandle),\n    promise\n  };\n};\n\nclass TimeoutProperty {\n  constructor(property, timeMs) {\n    this.property = property;\n    this.timeMs = timeMs;\n\n    this.isAsync = () => true;\n  }\n\n  generate(mrng, runId) {\n    return this.property.generate(mrng, runId);\n  }\n\n  run(v) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const t = timeoutAfter(_this.timeMs);\n      const propRun = Promise.race([_this.property.run(v), t.promise]);\n      propRun.then(t.clear, t.clear);\n      return propRun;\n    })();\n  }\n\n}\n\nexports.TimeoutProperty = TimeoutProperty;","map":null,"metadata":{},"sourceType":"script"}