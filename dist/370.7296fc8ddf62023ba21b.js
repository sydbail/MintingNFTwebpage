"use strict";(self.webpackChunkexample_browser_angular=self.webpackChunkexample_browser_angular||[]).push([[370],{97370:(tt,S,u)=>{u.r(S),u.d(S,{default:()=>_});var p=u(58243),b=u(19663),y=u(48415),g=u(28616),x=u(8239),v=u(53549),Z=u(3539),m=u(13299);const F=function(){var r=(0,x.Z)(function*(t,e,i){const a=new v.UnixFS({type:"directory",mtime:t.mtime,mode:t.mode}),s=(0,m.encode)((0,m.prepare)({Data:a.marshal()}));return{cid:yield(0,Z.Z)(s,e,i),path:t.path,unixfs:a,size:s.length}});return function(e,i,a){return r.apply(this,arguments)}}();var C=u(51135),V=u(65458),N=u(69346),G=u(89690);function D(){return(D=(0,x.Z)(function*(r,t){return t(yield G(r))})).apply(this,arguments)}var B=u(17671);function P(r,t,e){return E.apply(this,arguments)}function E(){return(E=(0,x.Z)(function*(r,t,e){const i=[];var d,a=!0,s=!1;try{for(var f,l,h=(0,p.Z)(B(r,e.maxChildrenPerNode));a=(f=yield h.next()).done,l=yield f.value,!a;a=!0){const o=l;i.push(yield t(o))}}catch(o){s=!0,d=o}finally{try{!a&&null!=h.return&&(yield h.return())}finally{if(s)throw d}}return i.length>1?P(i,t,e):i[0]})).apply(this,arguments)}function T(){return(T=(0,x.Z)(function*(r,t,e){const i=new j(e.layerRepeat);let a=0,s=1,d=i;var l,h=!0,f=!1;try{for(var n,c,o=(0,p.Z)(B(r,e.maxChildrenPerNode));h=(n=yield o.next()).done,c=yield n.value,!h;h=!0){const R=c;d.isFull()&&(d!==i&&i.addChild(yield d.reduce(t)),a&&a%e.layerRepeat==0&&s++,d=new A(s,e.layerRepeat,a),a++),d.append(R)}}catch(R){f=!0,l=R}finally{try{!h&&null!=o.return&&(yield o.return())}finally{if(f)throw l}}return d&&d!==i&&i.addChild(yield d.reduce(t)),i.reduce(t)})).apply(this,arguments)}class A{constructor(t,e,i=0){this.maxDepth=t,this.layerRepeat=e,this.currentDepth=1,this.iteration=i,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:t,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;const t=this._findParent(this.node,this.currentDepth);return!t||(this._addNextNodeToParent(t),!1)}_addNextNodeToParent(t){this.parent=t;const e={children:[],depth:t.depth+1,parent:t,maxDepth:this.maxDepth,maxChildren:Math.floor(t.children.length/this.layerRepeat)*this.layerRepeat};t.children.push(e),this.currentDepth=e.depth,this.node=e}append(t){this.node.data=t}reduce(t){return this._reduce(this.root,t)}_reduce(t,e){var i=this;return(0,x.Z)(function*(){let a=[];return t.children.length&&(a=yield Promise.all(t.children.filter(s=>s.data).map(s=>i._reduce(s,e)))),e((t.data||[]).concat(a))})()}_findParent(t,e){const i=t.parent;if(i&&0!==i.depth)return i.children.length!==i.maxChildren&&i.maxChildren?i:this._findParent(i,e)}}class j extends A{constructor(t){super(0,t),this.root.depth=0,this.currentDepth=1}addChild(t){this.root.children.push(t)}reduce(t){return t((this.root.data||[]).concat(this.root.children))}}const M={flat:function(r,t){return D.apply(this,arguments)},balanced:function(r,t,e){return P(r,t,e)},trickle:function(r,t,e){return T.apply(this,arguments)}};function z(){return(z=(0,g.Z)(function*(r,t,e){let a,s,i=-1;s="function"==typeof e.bufferImporter?e.bufferImporter:(yield(0,y.Z)(u.e(256).then(u.bind(u,10256)))).default;var f,d=!0,h=!1;try{for(var o,n,l=(0,p.Z)(V(s(r,t,e),e.blockWriteConcurrency));d=(o=yield(0,y.Z)(l.next())).done,n=yield(0,y.Z)(o.value),!d;d=!0){const c=n;i++,0!==i?(1===i&&a&&(yield a,a=null),yield c):a=c}}catch(c){h=!0,f=c}finally{try{!d&&null!=l.return&&(yield(0,y.Z)(l.return()))}finally{if(h)throw f}}a&&(a.single=!0,yield a)})).apply(this,arguments)}const $=(r,t,e)=>{function a(){return(a=(0,x.Z)(function*(s){if(1===s.length&&s[0].single&&e.reduceSingleLeafToSelf){const n=s[0];if(n.cid.code===N.code&&(void 0!==r.mtime||void 0!==r.mode)){let c=yield t.get(n.cid);n.unixfs=new v.UnixFS({type:"file",mtime:r.mtime,mode:r.mode,data:c}),c=(0,m.encode)((0,m.prepare)({Data:n.unixfs.marshal()})),n.cid=yield(0,Z.Z)(c,t,{...e,codec:m,hasher:e.hasher,cidVersion:e.cidVersion}),n.size=c.length}return{cid:n.cid,path:r.path,unixfs:n.unixfs,size:n.size}}const d=new v.UnixFS({type:"file",mtime:r.mtime,mode:r.mode}),h=s.filter(n=>!!(n.cid.code===N.code&&n.size||n.unixfs&&!n.unixfs.data&&n.unixfs.fileSize())||Boolean(n.unixfs&&n.unixfs.data&&n.unixfs.data.length)).map(n=>n.cid.code===N.code?(d.addBlockSize(n.size),{Name:"",Tsize:n.size,Hash:n.cid}):(d.addBlockSize(n.unixfs&&n.unixfs.data?n.unixfs.data.length:n.unixfs&&n.unixfs.fileSize()||0),{Name:"",Tsize:n.size,Hash:n.cid})),f={Data:d.marshal(),Links:h},l=(0,m.encode)((0,m.prepare)(f));return{cid:yield(0,Z.Z)(l,t,e),path:r.path,unixfs:d,size:l.length+f.Links.reduce((n,c)=>n+c.Tsize,0)}})).apply(this,arguments)}return function(s){return a.apply(this,arguments)}},K=function(r,t,e){const i=M[e.strategy];if(!i)throw C(new Error(`Unknown importer build strategy name: ${e.strategy}`),"ERR_BAD_STRATEGY");return i(function(r,t,e){return z.apply(this,arguments)}(r,t,e),$(r,t,e),e)};function k(r){try{if(r instanceof Uint8Array)return(0,g.Z)(function*(){yield r})();if(function(r){return Symbol.iterator in r}(r))return(0,g.Z)(function*(){yield*(0,b.Z)((0,p.Z)(r),y.Z)})();if(function(r){return Symbol.asyncIterator in r}(r))return r}catch{throw C(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw C(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}function I(){return(I=(0,g.Z)(function*(r,t,e){var s,i=!0,a=!1;try{for(var h,f,d=(0,p.Z)(r);i=(h=yield(0,y.Z)(d.next())).done,f=yield(0,y.Z)(h.value),!i;i=!0){const l=f;if(l.path&&("./"===l.path.substring(0,2)&&(e.wrapWithDirectory=!0),l.path=l.path.split("/").filter(o=>o&&"."!==o).join("/")),l.content){let o,n;o="function"==typeof e.chunker?e.chunker:"rabin"===e.chunker?(yield(0,y.Z)(u.e(954).then(u.bind(u,45954)))).default:(yield(0,y.Z)(u.e(32).then(u.bind(u,91032)))).default,n="function"==typeof e.chunkValidator?e.chunkValidator:(yield(0,y.Z)(u.e(510).then(u.bind(u,51510)))).default;const c={path:l.path,mtime:l.mtime,mode:l.mode,content:o(n(k(l.content),e),e)};yield()=>K(c,t,e)}else{if(!l.path)throw new Error("Import candidate must have content or path or both");{const o={path:l.path,mtime:l.mtime,mode:l.mode};yield()=>F(o,t,e)}}}}catch(l){a=!0,s=l}finally{try{!i&&null!=d.return&&(yield(0,y.Z)(d.return()))}finally{if(a)throw s}}})).apply(this,arguments)}const _=function(r,t,e){return I.apply(this,arguments)}}}]);